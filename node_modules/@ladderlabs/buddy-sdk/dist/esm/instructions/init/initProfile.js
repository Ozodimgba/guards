import { __assign, __awaiter, __generator } from "tslib";
import { SYSVAR_INSTRUCTIONS_PUBKEY } from "@solana/web3.js";
import * as anchor from "@project-serum/anchor";
import { getBuddyNameProfilePDA, getBuddyPDA } from "../../utils/pda";
export function initProfile(program, authority, buddyName, referrerTreasury, payer) {
    if (payer === void 0) { payer = null; }
    return __awaiter(this, void 0, void 0, function () {
        var buddyPDA, buddyNamePDA, method;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    buddyPDA = getBuddyPDA(program, buddyName);
                    buddyNamePDA = getBuddyNameProfilePDA(program, authority);
                    method = payer ? program.methods.initBuddyProfileWithPayer(buddyName) : program.methods
                        .initBuddyProfile(buddyName);
                    return [4 /*yield*/, method
                            .accounts(__assign({ systemProgram: anchor.web3.SystemProgram.programId, rent: anchor.web3.SYSVAR_RENT_PUBKEY, instructionSysvarAccount: SYSVAR_INSTRUCTIONS_PUBKEY, authority: authority, referrerSharedTreasury: referrerTreasury || null, buddy: buddyPDA, buddyName: buddyNamePDA }, (payer ? { payer: payer } : {})))
                            .instruction()];
                case 1: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
//# sourceMappingURL=initProfile.js.map