"use strict";
exports.__esModule = true;
exports.initProfile = void 0;
var tslib_1 = require("tslib");
var web3_js_1 = require("@solana/web3.js");
var anchor = tslib_1.__importStar(require("@project-serum/anchor"));
var pda_1 = require("../../utils/pda");
function initProfile(program, authority, buddyName, referrerTreasury, payer) {
    if (payer === void 0) { payer = null; }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var buddyPDA, buddyNamePDA, method;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    buddyPDA = (0, pda_1.getBuddyPDA)(program, buddyName);
                    buddyNamePDA = (0, pda_1.getBuddyNameProfilePDA)(program, authority);
                    method = payer ? program.methods.initBuddyProfileWithPayer(buddyName) : program.methods
                        .initBuddyProfile(buddyName);
                    return [4 /*yield*/, method
                            .accounts(tslib_1.__assign({ systemProgram: anchor.web3.SystemProgram.programId, rent: anchor.web3.SYSVAR_RENT_PUBKEY, instructionSysvarAccount: web3_js_1.SYSVAR_INSTRUCTIONS_PUBKEY, authority: authority, referrerSharedTreasury: referrerTreasury || null, buddy: buddyPDA, buddyName: buddyNamePDA }, (payer ? { payer: payer } : {})))
                            .instruction()];
                case 1: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.initProfile = initProfile;
//# sourceMappingURL=initProfile.js.map